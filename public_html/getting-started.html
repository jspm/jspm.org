<!DOCTYPE html><html lang="en"><head><link rel="alternate" title="JSPM" type="application/json" href="https://jspm.org/feed.json"><meta property="og:title" content="JSPM - Getting Started"><meta property="og:image" content="https://jspm.org/jspm.png"><meta name="Description" content="JSPM Getting Started"><meta property="og:description" content="JSPM Getting Started"><meta property="og:url" content="https://jspm.org/getting-started"><meta name="twitter:card" content="summary_large_image">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <!-- Immediate dark mode styles to prevent flash -->
  <script>
    (function() {
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const isDark = savedTheme === 'dark' || (!savedTheme && prefersDark);
      
      // Update theme in localStorage if following system
      if (!savedTheme && prefersDark) {
        // We're using system preference - don't store anything in localStorage
      }
      
      if (isDark) {
        document.documentElement.style.colorScheme = 'dark';
        document.documentElement.classList.add('dark-mode');
        document.write('<style>:root{background-color:#1A202C!important;}body{background-color:#1A202C!important;color:#E2E8F0!important;} html.dark-mode body{background-color:#1A202C!important;color:#E2E8F0!important;} .topbar{background-color:#1A202C!important;border-color:#4A5568!important;} .sidebar{background-color:#2D3748!important;border-color:#4A5568!important;}</style>');
      }
    })();
  </script>
  <link rel="stylesheet" href="/style.css">
  <script defer="" src="/script.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M0FZNQ9ZPV"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-M0FZNQ9ZPV');
  </script>
<title>JSPM - Getting Started</title></head>
<body class="page-getting-started">
  <div class="topbar">
    <a href="/">
      <div class="logobox"></div>
      <h1 class="logo">JSPM</h1>
    </a>
    <ul class="toplinks">
      <li><a target="_blank" href="https://generator.jspm.io" rel="noopener">Online Generator</a></li>
      <li><a target="_blank" href="https://status.jspm.io" rel="noopener">CDN Status</a></li>
      <li><a target="_blank" href="https://opencollective.com/jspm" rel="noopener">Sponsor</a></li>
      <li class="theme-toggle" title="Toggle dark/light mode"></li>
      <li class="github"><a target="_blank" href="https://github.com/jspm/jspm" rel="noopener"></a></li>
    </ul>
    <div class="mobile-menu"></div>
  </div>

  <div class="sidebar">
    <div class="toc">
      <ul class="sections">
        <li>
          <a href="/getting-started">JSPM</a>
          <ul class="section">
            <li><a href="/getting-started">Getting Started</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </li>

        <li>
          <a href="/docs/cli">Documentation</a>
          <ul class="section">
            <li><a href="/docs/cli">JSPM CLI</a></li>
            <li><a href="/docs/generator">JSPM Generator</a></li>
            <li><a href="/docs/integrations">Integrations</a></li>
            <li><a href="/docs/cdn-resolution">CDN Resolution</a></li>
          </ul>
        </li>

        <li>
          <a href="/cdn/jspm-io">CDN</a>
          <ul class="section">
            <li><a href="/cdn/jspm-io">JSPM.IO</a></li>
            <li><a href="/cdn/api">API</a></li>
          </ul>
        </li>

        <li class="blog">
          <a href="/jspm-cli">Blog</a>
          <ul class="section">
            <li class="blog-link"><a href="/jspm-4.0-release"><em>JSPM 4.0 Release</em></a></li>
            <li class="blog-link"><a href="/js-integrity-with-import-maps"><em>JavaScript Integrity Manifests with Import Maps</em></a></li>
            <li class="blog-link"><a href="/jspm-dev-deprecation"><em>Deprecating jspm.dev</em></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>


  <div class="content-container">
    <div class="content"><h1>Getting Started</h1>
<p>This guide runs through the steps of setting up the JSPM CLI and using it in some standard import maps workflows from development to production.</p>
<p>If you just want to get a quick feel for import maps without using the CLI, <a href="/integrations#online-generator">see the online generator guide</a>.</p>
<a name="installation" class="anchor main"></a><h2>Installation</h2>
<p>Ensure you have <a href="https://nodejs.org/en" target="_blank" rel="noopener">Node.js</a> installed.</p>
<p>From the command-line, the JSPM CLI can then be installed using npm:</p>
<pre><code>npm install -g jspm
</code></pre>
<a name="initialize-a-new-project" class="anchor main"></a><h2>Initialize a new Project</h2>
<p>To create a new JSPM project run:</p>
<pre><code>jspm init my-project
</code></pre>
<p>This will guide you through a series of questions to set up your project:</p>
<pre><code>Creating package.json in my-project

Package Name: (my-project) 
Version: (dev)
Description: 
Enable TypeScript with type stripping? (y/n)
Exports Entry Point: (src/index.ts)
Create a .gitignore file with JavaScript defaults? (y/n)
Create an index.html example app file? (y/n)
Create an AI prompt file? (y/n)
Which AI prompt file would you like to create?
</code></pre>
<p>When the initialization completes, you'll have a new project with several files:</p>
<pre><code>✓  my-project/tsconfig.json created
✓  my-project/.gitignore created
✓  my-project/index.html created
✓  my-project/src/index.ts created   
✓  my-project/src/landing.js created 
✓  my-project/src/landing.css created
✓  my-project/CLAUDE.md created      
✓  my-project/package.json created

Ok: Initialization complete.
Info: Next, run cd my-project and jspm serve to start a local server.
</code></pre>
<a name="starting-the-development-server" class="anchor main"></a><h2>Starting the Development Server</h2>
<p>JSPM provides a development server that handles auto-installation, hot reloading, and TypeScript type stripping.</p>
<p>To start the development server, run:</p>
<pre><code>cd my-project
jspm serve
</code></pre>
<p>This will launch the local server on <code>http://localhost:5776</code>. You can press <code>o</code> to open the application in your browser, or navigate to the URL manually.</p>
<p>The development server watches for changes to your files and automatically refreshes the browser on changes. Applications can respond to reloads by implementing the <code><span class="keyword">import</span>.meta.hot</code> API supported by ES Module Shims.</p>
<p>Try changing the source of <code>src/landing.js</code> or <code>src/landing.css</code> to see live refreshes of both JS and CSS.</p>
<a name="how-it-works" class="anchor main"></a><h2>How it Works</h2>
<p>The following <code>package.json</code> was created by the initialization:</p>
<p><em>package.json</em></p>
<pre><code class="language-json">{
  <span class="string">"name"</span>: <span class="string">"my-project"</span>,
  <span class="string">"version"</span>: <span class="string">"dev"</span>,
  <span class="string">"description"</span>: <span class="string">""</span>,
  <span class="string">"type"</span>: <span class="string">"module"</span>,
  <span class="string">"exports"</span>: {
    <span class="string">"."</span>: <span class="string">"./src/index.ts"</span>
  }
}
</code></pre>
<p><em>importmap.js</em></p>
<pre><code class="language-js">(map =&gt; {
  <span class="keyword">const</span> mapUrl = document.currentScript.src;
  <span class="keyword">const</span> resolve = imports =&gt; Object.fromEntries(Object.entries(imports ).map(([k, v]) =&gt; [k, <span class="keyword">new</span> URL(v, mapUrl).href]));
  document.head.appendChild(Object.assign(document.createElement(<span class="string">"script"</span>), {
    type: <span class="string">"importmap"</span>,
    innerHTML: JSON.stringify({
      imports: resolve(map.imports),
      scopes: Object.fromEntries(Object.entries(map.scopes).map(([k, v]) =&gt; [<span class="keyword">new</span> URL(k, mapUrl).href, resolve(v)]))
    })
  }));
})
({
  <span class="string">"imports"</span>: {
    <span class="string">"my-project"</span>: <span class="string">"./src/index.ts"</span>
  },
  <span class="string">"scopes"</span>: {
    <span class="string">"./"</span>: {
      <span class="string">"canvas-confetti"</span>: <span class="string">"https://ga.jspm.io/npm:canvas-confetti@<span class="number">1</span>.<span class="number">9</span>.<span class="number">3</span>/dist/confetti.module.mjs"</span>
    }
  }
});
</code></pre>
<p>The generated <code>index.html</code> contains the following:</p>
<p><em>index.html</em></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=<span class="string">"en"</span>&gt;
&lt;head&gt;
  &lt;meta charset=<span class="string">"UTF<span class="number">-8</span>"</span>&gt;
  &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=<span class="number">1</span>.<span class="number">0</span>"</span>&gt;
  &lt;title&gt;my-project&lt;/title&gt;
  &lt;script src=<span class="string">"importmap.js"</span>&gt;&lt;/script&gt;
  &lt;script <span class="keyword">async</span> crossorigin=<span class="string">"anonymous"</span> src=<span class="string">"https://ga.jspm.io/npm:es-module-shims@<span class="number">2</span>.<span class="number">5</span>.<span class="number">1</span>/dist/es-module-shims.js"</span>&gt;&lt;/script&gt;     
  &lt;script type=<span class="string">"module"</span>&gt;<span class="keyword">import</span> <span class="string">'my-project'</span>;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>When the server is started, or when running <code>jspm install</code>, the <code>importmap.js</code> file is initialized:</p>
<p>When loading the HTML page in the browser:</p>
<ol>
<li>The import map injection script is being loaded, which injects a <code>&lt;script type=<span class="string">"importmap"</span>&gt;&lt;/script&gt;</code> with the generated import map directly into the head of the page.</li>
<li>The ES Module Shims polyfill is being loaded which polyfills support for import maps and multiple import maps in older browsers, as well as supporting hot reloadinng.</li>
<li>Finally we import the application main entry point with <code><span class="keyword">import</span> <span class="string">'my-project'</span></code>.</li>
</ol>
<p>The import map will resolve the entry point source, and the browser itself will load the TypeScript file from <code>src/index.ts</code>.<br>The JSPM server will strip the types but leave source locations in tact so source maps are not even necessary for debugging and for example VSCode attachment can easily work for debugging as well back to original sources.</p>
<p>The <code>src/index.ts</code> in this example then loads a separate example page <code>landing.js</code> which in turn loads its own stylesheet using a natively-supported CSS import:</p>
<pre><code class="language-js"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">'./landing.css'</span> with { type: <span class="string">'css'</span> };

<span class="keyword">if</span> (!document.adoptedStyleSheets.includes(style))
  document.adoptedStyleSheets.push(style);
</code></pre>
<p>Any changes made to the stylesheet get written into the same stylesheet that is imported here instantly.</p>
<blockquote>
<p>While ES Module Shims is recommended for browser compatibility and hot reloading, it is not strictly required in modern versions of Chrome - the application will still work fine natively if it is removed.</p>
</blockquote>
<p>The rest is just static file serving, apart from optional TypeScript type stripping on the server, there is no other magic at all here, just standard JS ecosystem conventions.</p>
<a name="managing-entry-points" class="anchor main"></a><h2>Managing Entry Points</h2>
<p>The top-level <code><span class="string">"imports"</span></code> in the import map are the main entry points. The <code>package.json</code> <code><span class="string">"name"</span></code> is important here as it names these entry points - just as we needed to do <code><span class="keyword">import</span> <span class="string">'my-project'</span></code> in the example.</p>
<p><code>jspm install</code> uses scopes for all dependencies that are not the main entry points so that all imports should either be the package.json package name, or be a subpath of it.</p>
<p>To define new entry points, add them to the exports field of the package:</p>
<pre><code class="language-json">{
  <span class="string">"name"</span>: <span class="string">"my-project"</span>,
  <span class="string">"version"</span>: <span class="string">"dev"</span>,
  <span class="string">"description"</span>: <span class="string">""</span>,
  <span class="string">"type"</span>: <span class="string">"module"</span>,
  <span class="string">"exports"</span>: {
    <span class="string">"."</span>: <span class="string">"./src/index.ts"</span>,
    <span class="string">"./page2"</span>: <span class="string">"./src/page2.js"</span>
  }
}
</code></pre>
<p>With the new entry point defined, another HTML page can contain <code><span class="keyword">import</span> <span class="string">'my-project/page2'</span></code>.</p>
<p>Either run <code>jspm install</code> or <code>jspm serve</code> and the <code>importmap.js</code> file will be updated with this new mapping in the import map.</p>
<p>The <code><span class="string">"exports"</span></code> field is a Node.js specification, the same one used for library entry points. It supports other useful features like conditional loading and pattern mappings, all of which are supported by JSPM. It is recommended to read the <a href="https://nodejs.org/docs/latest/api/packages.html#package-entry-points" target="_blank" rel="noopener">Node.js documentation</a> for further reference on this.</p>
<a name="adding-dependencies" class="anchor main"></a><h2>Adding Dependencies</h2>
<p>Keeping the development server, you can add new dependencies to your code and JSPM will refresh the import map automatically.</p>
<p>For example, edit <code>src/index.ts</code> (or <code>src/index.js</code> if you didn't enable TypeScript) to import and use Lit:</p>
<p><em>src/index.ts</em></p>
<pre><code class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> lit <span class="keyword">from</span> <span class="string">'lit'</span>;

class MyElement extends lit.LitElement {
  static properties = {
    message: { type: String }
  };
  constructor() {
    super();
    <span class="keyword">this</span>.message = <span class="string">'Hello <span class="keyword">from</span> JSPM and Lit!'</span>;
  }
  render() {
    <span class="keyword">return</span> lit.html<span class="string">`&lt;div&gt;${<span class="keyword">this</span>.message}&lt;/div&gt;`</span>;
  }
}


customElements.define(<span class="string">'my-element'</span>, MyElement);
document.body.innerHTML = <span class="string">'&lt;my-element&gt;&lt;/my-element&gt;'</span>;
</code></pre>
<p>This will scan the application entry points, detect the <code>lit</code> import, and update your <code>importmap.js</code> file with its resolved dependency graph:</p>
<p><em>importmap.js</em></p>
<pre><code class="language-json">({ /* ...injection script... */ })
({
  <span class="string">"imports"</span>: {
    <span class="string">"my-project"</span>: <span class="string">"./src/index.ts"</span>
  },
  <span class="string">"scopes"</span>: {
    <span class="string">"./"</span>: {
      <span class="string">"lit"</span>: <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/index.js"</span>
    },
    <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/development/reactive-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/development/lit-html.js"</span>
    },
    <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/development/reactive-element.js"</span>,
      <span class="string">"lit-element/lit-element.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/development/lit-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/development/lit-html.js"</span>,
      <span class="string">"lit-html/is-server.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/development/is-server.js"</span>
    }
  }
});
</code></pre>
<p>JSPM's <code>importmap.js</code> acts like a lockfile in that once packages have been resolved to specific versions it will retain them at that version.</p>
<p>It is still advisable to also add package version constraints to the package.json file as well to ensure proper constraints, and support for <code>jspm update</code>.</p>
<a name="using-specific-subpaths" class="anchor main"></a><h2>Using Specific Subpaths</h2>
<p>Sometimes you may want to import a specific subpath of a package rather than the main entry point. For example, to use just the <code>html</code> feature of Lit:</p>
<p><code>jspm ls</code> can be used to inspect what versions and entry points of packages are available:</p>
<pre><code>jspm ls lit -f html
</code></pre>
<p>This will show you available subpaths containing "html":</p>
<pre><code>Package:        lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>
Description:    A library <span class="keyword">for</span> building fast, lightweight web components
License:        BSD<span class="number">-3</span>-Clause
Homepage:       https://lit.dev/
Repository:     https://github.com/lit/lit

Package Exports
./directives/unsafe-html.js → {
  <span class="string">"types"</span>: <span class="string">"./development/directives/unsafe-html.d.ts"</span>,
  <span class="string">"default"</span>: <span class="string">"./directives/unsafe-html.js"</span>
}
./html.js → {
  <span class="string">"types"</span>: <span class="string">"./development/html.d.ts"</span>,
  <span class="string">"default"</span>: <span class="string">"./html.js"</span>
}
./static-html.js → {
  <span class="string">"types"</span>: <span class="string">"./development/static-html.d.ts"</span>,
  <span class="string">"default"</span>: <span class="string">"./static-html.js"</span>
}
</code></pre>
<p>Now update your code to import just this subpath:</p>
<p><em>src/index.ts</em></p>
<pre><code class="language-javascript"><span class="keyword">import</span> { html, render } <span class="keyword">from</span> <span class="string">'lit/html.js'</span>;

<span class="keyword">const</span> template = html<span class="string">`&lt;div&gt;Hello <span class="keyword">from</span> Lit HTML!&lt;/div&gt;`</span>;
render(template, document.body);
</code></pre>
<p>Run <code>jspm install</code> again to update your import map:</p>
<pre><code>jspm install
</code></pre>
<a name="using-conditional-environments" class="anchor main"></a><h2>Using Conditional Environments</h2>
<p>JSPM supports conditional environments for different build modes, such as development and production.</p>
<p>To switch the installed import map into production mappings we can enable the production condition with the <code>--conditions</code> flag:</p>
<pre><code>jspm install -C production
</code></pre>
<p>This updates the <code>importmap.js</code> file with production URLs:</p>
<p><em>importmap.js</em></p>
<pre><code class="language-json">({ /* ...injection script... */ })
({
  <span class="string">"imports"</span>: {
    <span class="string">"my-project"</span>: <span class="string">"./src/index.ts"</span>
  },
  <span class="string">"scopes"</span>: {
    <span class="string">"./"</span>: {
      <span class="string">"lit"</span>: <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/index.js"</span>
    },
    <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>
    },
    <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>,
      <span class="string">"lit-element/lit-element.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/lit-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>,
      <span class="string">"lit-html/is-server.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/is-server.js"</span>
    }
  }
});
</code></pre>
<p>Notice how the <em>development</em> prefix is no longer present in the module paths. This allows packages to provide different implementations for development and production, and is a feature of <a href="https://nodejs.org/dist/latest-v19.x/docs/api/packages.html#conditional-exports" target="_blank" rel="noopener">Node.js conditional exports</a>.</p>
<p>The default conditional environment for JSPM is <code>[<span class="string">"browser"</span>, <span class="string">"development"</span>, <span class="string">"module"</span>]</code>. The <code>-C production</code> flag is always required to ensure a production map.</p>
<a name="import-map-integrity" class="anchor main"></a><h2>Import Map Integrity</h2>
<p>For security, it is recommended to generate import maps with the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type/importmap#integrity_metadata_map" target="_blank" rel="noopener"><code><span class="string">"integrity"</span></code></a> field populated.</p>
<p>This field allows populating the Subresource Integrity for all modules both as part of the static module graph and also part of the dynamic module graph of the application (that may or may not be loaded at runtime).</p>
<p>We can achieve this by adding the <code>--integrity</code> flag to any install operation.</p>
<p>Instead of outputting into the same <code>importmap.js</code>, let's make this a separate <code>importmap.production.js</code> artifact by using the <code>-o</code> flag as well:</p>
<pre><code>jspm install -C production --integrity -o importmap.production.js
</code></pre>
<p>This will create a new <code>importmap.production.js</code> with integrity hashes:</p>
<p><em>importmap.production.js</em></p>
<pre><code class="language-json">({ /* ...injection script... */ })
({
  <span class="string">"imports"</span>: {
    <span class="string">"my-project"</span>: <span class="string">"./src/index.ts"</span>
  },
  <span class="string">"scopes"</span>: {
    <span class="string">"./"</span>: {
      <span class="string">"canvas-confetti"</span>: <span class="string">"https://ga.jspm.io/npm:canvas-confetti@<span class="number">1</span>.<span class="number">9</span>.<span class="number">3</span>/dist/confetti.module.mjs"</span>,
      <span class="string">"lit"</span>: <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/index.js"</span>
    },
    <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>
    },
    <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>,
      <span class="string">"lit-element/lit-element.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/lit-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>,
      <span class="string">"lit-html/is-server.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/is-server.js"</span>
    }
  },
  <span class="string">"integrity"</span>: {
    <span class="string">"./src/index.ts"</span>: <span class="string">"sha384-xndJMHxpbrZzEpXDixygnadcmgKosRRSHO<span class="number">0</span>iYKB/e1FXzGQr1ui7HJTSec9AM<span class="number">48</span>k"</span>,
    <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/css-tag.js"</span>: <span class="string">"sha384-yawoKnICWh5SyKPJlj47kOQj7ybzJ<span class="number">9</span>CgSSJ<span class="number">2</span>Auq37QyaMpqAqBy+HCOtHf6QSWKl"</span>,
    <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>: <span class="string">"sha384-+PmQcPI<span class="number">0</span>ujsCr7U/<span class="number">4</span>NZXVH/i2/LRYjnJYfGjo4fXvYxmwMVycRQZ+Wh4TAQ/<span class="number">1</span>o9s"</span>,
    <span class="string">"https://ga.jspm.io/npm:canvas-confetti@<span class="number">1</span>.<span class="number">9</span>.<span class="number">3</span>/dist/confetti.module.mjs"</span>: <span class="string">"sha384-tTDLnEmzqaB<span class="number">2</span>FD/eQ<span class="number">6</span>oeuk47x87LcMyZ<span class="number">4</span>vyGWdkRlUjBbYCsh0PeYHB<span class="number">83</span>tb5lkcH"</span>,
    <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/lit-element.js"</span>: <span class="string">"sha384-xfzuCGvBA/QtAtuRtqiLcIsxDpQiQj+MzJVRhA<span class="number">0</span>kw913TYcYzIB<span class="number">31</span>PY<span class="number">9</span>OIypK<span class="number">7</span>gl"</span>,
    <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/is-server.js"</span>: <span class="string">"sha384-c2UPp3lPxy1SKxJFIPcaK<span class="number">7</span>PaWWWohEEwAaeBsoYeIF<span class="number">7</span>ULocdSenWqg/<span class="number">7</span>Iln4Dkw5"</span>,
    <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>: <span class="string">"sha384-kPZntmv98MkUK<span class="number">0</span>U+<span class="number">5</span>niOLNQAQAK<span class="number">3</span>WE<span class="number">0</span>mqaX/br00elXsAxlcHvv5IQsZHFdHRAWH"</span>,
    <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/index.js"</span>: <span class="string">"sha384-IZzW+Sfdx55gIfvWXINdnp5aNwUifd4IB<span class="number">0</span>ROrRyipc+QWqXXpJhcbmT<span class="number">2</span>+<span class="number">7</span>tx9CCN"</span>       
  }
})
</code></pre>
<a name="changing-providers" class="anchor main"></a><h2>Changing Providers</h2>
<p>The benefits of using an ESM-native CDN like <code>jspm.io</code> is that dependencies are fully production optimized, and older packages that only support CommonJS are automatically converted by the CDN into ES modules to support browser usage.</p>
<p>Lit is actually a package that is designed from the start as an ESM package and it is also optimized at publish time, so it's actually possible to create an import map directly against the original sources.</p>
<a name="the-nodemodules-provider" class="anchor"></a><h3>The nodemodules Provider</h3>
<p>To achieve this locally, install the dependencies into node_modules with npm, as well as the <code>es-module-shims</code> polyfill itself:</p>
<pre><code>npm install lit es-module-shims
</code></pre>
<p>Now the <code>--provider</code> option will resolve all packages against the <code>nodemodules</code> provider with JSPM, just like the conditional environment change was handled previously:</p>
<pre><code>jspm install --provider nodemodules
</code></pre>
<p>If everything resolves correctly, the result is an <code>importmap.js</code> referencing the local <code>node_modules</code> folder:</p>
<p><em>importmap.js</em></p>
<pre><code class="language-json">({ /* ...injection script... */ })
({
  <span class="string">"imports"</span>: {
    <span class="string">"my-project"</span>: <span class="string">"./src/index.ts"</span>
  },
  <span class="string">"scopes"</span>: {
    <span class="string">"./"</span>: {
      <span class="string">"lit"</span>: <span class="string">"./node_modules/lit/index.js"</span>
    },
    <span class="string">"./node_modules/lit-element/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"./node_modules/@lit/reactive-element/development/reactive-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"./node_modules/lit-html/development/lit-html.js"</span>
    },
    <span class="string">"./node_modules/lit/"</span>: {
      <span class="string">"@lit/reactive-element"</span>: <span class="string">"./node_modules/@lit/reactive-element/development/reactive-element.js"</span>,
      <span class="string">"lit-element/lit-element.js"</span>: <span class="string">"./node_modules/lit-element/development/lit-element.js"</span>,
      <span class="string">"lit-html"</span>: <span class="string">"./node_modules/lit-html/development/lit-html.js"</span>,
      <span class="string">"lit-html/is-server.js"</span>: <span class="string">"./node_modules/lit-html/development/is-server.js"</span>
    }
  }
})
</code></pre>
<p>Alternatively, Lit can even be loaded from another CDN like UNPKG via <code>jspm install -p unpkg</code>.</p>
<p>By default JSPM supports <code>jspm.io</code>, <code>nodemodules</code>, <code>esm.sh</code>, <code>denoland</code>, <code>unpkg</code>, <code>skypack</code> and <code>jsdelivr</code> package providers, and custom providers can be configured programatically in the JSPM Generator core generation library as well.</p>
<blockquote>
<p>In general it is recommended to stick with the <code>jspm.io</code> provider for the best compatibility, but in time the native user experience of other providers should improve considerably.</p>
</blockquote>
<a name="building" class="anchor"></a><h3>Building</h3>
<p>Since the conventions and entry points are fully understood by JSPM's execution model, it can perform a build <em>of the entire package</em> without any configuration further being necessary:</p>
<pre><code>jspm build
</code></pre>
<p>This will run RollupJS against the entry points producing an optimized copy of the package inside of the <code>dist</code> folder. Files can be managed with the <code><span class="string">"ignore"</span></code> and <code><span class="string">"files"</span></code> fields in the package.json to include or exclude from this copying.</p>
<p>To create an import map for the built package we then need to install the optimized package.</p>
<p>Instead of outputting an import map directly let's output an optimized HTML file with the import map and preload tags injected:</p>
<pre><code>jspm install --dir dist -C production --integrity --preload -o app.html
</code></pre>
<p>Will then generate an HTML page:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=<span class="string">"utf-8"</span>&gt;
    &lt;script <span class="keyword">async</span> src=<span class="string">"https://ga.jspm.io/npm:es-module-shims@<span class="number">2</span>.<span class="number">5</span>.<span class="number">1</span>/dist/es-module-shims.js"</span> crossorigin=<span class="string">"anonymous"</span> integrity=<span class="string">"sha384-Nce024cgIpt9LvkSDb7frhgilsi92irFYd1JDLfjX<span class="number">5</span>R<span class="number">3</span>Ozrad+<span class="number">5</span>TTxeszg5f+WtQ"</span>&gt;&lt;/script&gt;
    &lt;script type=<span class="string">"importmap"</span>&gt;
    {
      <span class="string">"imports"</span>: {
        <span class="string">"my-project"</span>: <span class="string">"./dist/src/index.js"</span>
      },
      <span class="string">"scopes"</span>: {
        <span class="string">"./dist/"</span>: {
          <span class="string">"lit"</span>: <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/index.js"</span>
        },
        <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/"</span>: {
          <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>,
          <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>
        },
        <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/"</span>: {
          <span class="string">"@lit/reactive-element"</span>: <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>,
          <span class="string">"lit-element/lit-element.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/lit-element.js"</span>,
          <span class="string">"lit-html"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>,
          <span class="string">"lit-html/is-server.js"</span>: <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/is-server.js"</span>
        }
      },
      <span class="string">"integrity"</span>: {
        <span class="string">"./dist/src/index.js"</span>: <span class="string">"sha384-wx/myYGGnUfXlCxJwYrPM<span class="number">42</span>cKPKgodMDRmvrfSkApslhw67eQSUNgoYmLM<span class="number">7</span>Edbsy"</span>,
        <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/css-tag.js"</span>: <span class="string">"sha384-yawoKnICWh5SyKPJlj47kOQj7ybzJ<span class="number">9</span>CgSSJ<span class="number">2</span>Auq37QyaMpqAqBy+HCOtHf6QSWKl"</span>,
        <span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span>: <span class="string">"sha384-+PmQcPI<span class="number">0</span>ujsCr7U/<span class="number">4</span>NZXVH/i2/LRYjnJYfGjo4fXvYxmwMVycRQZ+Wh4TAQ/<span class="number">1</span>o9s"</span>,
        <span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/lit-element.js"</span>: <span class="string">"sha384-xfzuCGvBA/QtAtuRtqiLcIsxDpQiQj+MzJVRhA<span class="number">0</span>kw913TYcYzIB<span class="number">31</span>PY<span class="number">9</span>OIypK<span class="number">7</span>gl"</span>,
        <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/is-server.js"</span>: <span class="string">"sha384-c2UPp3lPxy1SKxJFIPcaK<span class="number">7</span>PaWWWohEEwAaeBsoYeIF<span class="number">7</span>ULocdSenWqg/<span class="number">7</span>Iln4Dkw5"</span>,
        <span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span>: <span class="string">"sha384-kPZntmv98MkUK<span class="number">0</span>U+<span class="number">5</span>niOLNQAQAK<span class="number">3</span>WE<span class="number">0</span>mqaX/br00elXsAxlcHvv5IQsZHFdHRAWH"</span>,
        <span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/index.js"</span>: <span class="string">"sha384-IZzW+Sfdx55gIfvWXINdnp5aNwUifd4IB<span class="number">0</span>ROrRyipc+QWqXXpJhcbmT<span class="number">2</span>+<span class="number">7</span>tx9CCN"</span>   
      }
    }
    &lt;/script&gt;
    &lt;link rel=<span class="string">"modulepreload"</span> href=<span class="string">"./dist/src/index.js"</span> integrity=<span class="string">"sha384-wx/myYGGnUfXlCxJwYrPM<span class="number">42</span>cKPKgodMDRmvrfSkApslhw67eQSUNgoYmLM<span class="number">7</span>Edbsy"</span> /&gt;
    &lt;link rel=<span class="string">"modulepreload"</span> href=<span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/css-tag.js"</span> integrity=<span class="string">"sha384-yawoKnICWh5SyKPJlj47kOQj7ybzJ<span class="number">9</span>CgSSJ<span class="number">2</span>Auq37QyaMpqAqBy+HCOtHf6QSWKl"</span> /&gt;
    &lt;link rel=<span class="string">"modulepreload"</span> href=<span class="string">"https://ga.jspm.io/npm:@lit/reactive-element@<span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span>/reactive-element.js"</span> integrity=<span class="string">"sha384-+PmQcPI<span class="number">0</span>ujsCr7U/<span class="number">4</span>NZXVH/i2/LRYjnJYfGjo4fXvYxmwMVycRQZ+Wh4TAQ/<span class="number">1</span>o9s"</span> /&gt;
    &lt;link rel=<span class="string">"modulepreload"</span> href=<span class="string">"https://ga.jspm.io/npm:lit-element@<span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span>/lit-element.js"</span> integrity=<span class="string">"sha384-xfzuCGvBA/QtAtuRtqiLcIsxDpQiQj+MzJVRhA<span class="number">0</span>kw913TYcYzIB<span class="number">31</span>PY<span class="number">9</span>OIypK<span class="number">7</span>gl"</span> /&gt;
    &lt;link rel=<span class="string">"modulepreload"</span> href=<span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/is-server.js"</span> integrity=<span class="string">"sha384-c2UPp3lPxy1SKxJFIPcaK<span class="number">7</span>PaWWWohEEwAaeBsoYeIF<span class="number">7</span>ULocdSenWqg/<span class="number">7</span>Iln4Dkw5"</span> /&gt;
    &lt;link rel=<span class="string">"modulepreload"</span> href=<span class="string">"https://ga.jspm.io/npm:lit-html@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/lit-html.js"</span> integrity=<span class="string">"sha384-kPZntmv98MkUK<span class="number">0</span>U+<span class="number">5</span>niOLNQAQAK<span class="number">3</span>WE<span class="number">0</span>mqaX/br00elXsAxlcHvv5IQsZHFdHRAWH"</span> /&gt;
    &lt;link rel=<span class="string">"modulepreload"</span> href=<span class="string">"https://ga.jspm.io/npm:lit@<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>/index.js"</span> integrity=<span class="string">"sha384-IZzW+Sfdx55gIfvWXINdnp5aNwUifd4IB<span class="number">0</span>ROrRyipc+QWqXXpJhcbmT<span class="number">2</span>+<span class="number">7</span>tx9CCN"</span> /&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<a name="dependency-inlining" class="anchor"></a><h3>Dependency Inlining</h3>
<p>If instead of having a production import map we wanted to have a single bundle that inlined the Lit dependency, this cam be achieved with the following externals convention in JSPM.</p>
<p>Move the <code><span class="string">"lit"</span></code> dependency in the <code><span class="string">"dependencies"</span></code> of the package.json to instead in the <code><span class="string">"devDependencies"</span></code>:</p>
<p><em>package.json</em></p>
<pre><code class="language-json">{
  <span class="string">"name"</span>: <span class="string">"my-project"</span>,
  <span class="string">"version"</span>: <span class="string">"dev"</span>,
  <span class="string">"description"</span>: <span class="string">""</span>,
  <span class="string">"type"</span>: <span class="string">"module"</span>,
  <span class="string">"exports"</span>: {
    <span class="string">"."</span>: <span class="string">"./src/index.ts"</span>
  },
  <span class="string">"devDependencies"</span>: {
    <span class="string">"es-module-shims"</span>: <span class="string">"^<span class="number">2</span>.<span class="number">5</span>.<span class="number">1</span>"</span>,
    <span class="string">"lit"</span>: <span class="string">"^<span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span>"</span>
  }
}
</code></pre>
<p>Then running <code>jspm build</code> again, the output package will be optimized with no dependencies, and no import map is necessary to execute the application.</p>
<a name="css-and-json-builds" class="anchor"></a><h3>CSS and JSON Builds</h3>
<p>Imports to CSS files and JSON files through native stylesheet imports:</p>
<pre><code class="language-js"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">'./style.css'</span> with { type: <span class="string">'css'</span> };

<span class="keyword">if</span> (!document.adoptedStyleSheets.includes(style))
  document.adoptedStyleSheets.push(style);
</code></pre>
<p>and JSON imports:</p>
<pre><code class="language-js"><span class="keyword">import</span> json <span class="keyword">from</span> <span class="string">'./data.json'</span> with { type: <span class="string">'json'</span> };
</code></pre>
<p>are fully supported in build workflows, with CSS assets being rebased in the build process.</p>
<div class="nextprev"><div class="edit-container"><a class="edit" target="_blank" href="https://github.com/jspm/jspm.org/blob/main/pages/getting-started.md" rel="noopener">Edit</a></div><div class="next"><a href="/faq">FAQ&nbsp;▶</a></div></div></div>
  </div>

</body></html>